(function(){"use strict";var e={5130:function(e,t,n){var a=n(9242),o=n(3396);function r(e,t){const n=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(n)}var s=n(89);const i={},l=(0,s.Z)(i,[["render",r]]);var d=l,u=n(1777),m=n(65),c=(n(1703),n(8042));const p={state:{posts:{},currentPost:{},sendComment:{},logoutUser:{},loginUser:{},registerUser:{}},actions:{GET_POSTS_USER:async({commit:e})=>{e("updatePosts",{posts:null,error:null,loading:!0});try{const{data:t,status:n}=await c.Z.get("/api/blog/posts");if(n>=400)throw new Error(t.message||"что-то пошло не так");return e("updatePosts",{posts:t,error:null,loading:!1}),{posts:t,error:null}}catch(t){return e("updatePosts",{posts:null,error:t,loading:!1}),{data:null,error:t}}},GET_POST_USER:async({commit:e},{id:t})=>{e("updatePost",{data:null,error:null,loading:!0});try{const{data:n,status:a}=await c.Z.get(`/api/blog/posts/${t}`);if(a>=400)throw new Error(n.message||"Что-то пошло не так");return e("updatePost",{...n,error:null,loading:!1}),{data:n,error:null}}catch(n){return e("updatePost",{data:null,error:n,loading:!1}),{data:null,error:n}}},SEND_COMMENT:async({commit:e},{id:t,message:n})=>{e("updateSendComment",{data:null,error:null,loading:!0});try{const{data:a,status:o}=await c.Z.post(`/api/posts/comment/${t.id}`,{text:n});if(o>=400)throw new Error(a.message||"Что-то пошло не так");return e("updateSendComment",{data:a,error:null,loading:!1}),{data:a,error:null}}catch(a){return e("updateSendComment",{data:null,error:a,loading:!1}),{data:null,error:a}}},LOGOUT:async({commit:e,dispatch:t})=>{try{const{data:n,status:a}=await c.Z.post("/api/logout");if(a>=400)throw new Error(n.message||"Что-то пошло не так");return e("updateLogout",{data:n,error:null}),t("checkToken"),localStorage.removeItem("x_xsrf_token"),{data:n,error:null}}catch(n){return e("updateLogout",{data:null,error:n}),t("checkToken"),{data:null,error:n}}},LOGIN_USER:async({commit:e,dispatch:t},{email:n,password:a})=>{c.Z.get("/sanctum/csrf-cookie").then((async()=>{e("updateLogin",{data:null,error:null,loading:!0});try{const{data:o,status:r}=await c.Z.post("/api/login",{email:n,password:a});if(r>=400)throw new Error(o.message||"Что-то пошло не так");return await localStorage.setItem("x_xsrf_token",o.plainTextToken),e("updateLogin",{data:o,error:null,loading:!1}),t("checkToken"),await u.Z.push({name:"blog"}),{data:o,error:null}}catch(o){return e("updateLogin",{data:null,error:o,loading:!1}),t("checkToken"),{data:null,error:o}}}))},REGISTER:async({commit:e,dispatch:t},{name:n,email:a,password:o,password_confirmation:r})=>{e("updateRegister",{data:null,error:null,loading:!0});try{const{data:s,status:i}=await c.Z.post("/api/register",{name:n,email:a,password:o,password_confirmation:r});if(i>=400)throw new Error(s.message||"Что-то пошло не так");return localStorage.setItem("x_xsrf_token",s.plainTextToken),t("checkToken"),e("updateRegister",{data:s,error:null,loading:!1}),await u.Z.push({name:"all-blogs"}),{data:s,error:null}}catch(s){return e("updateRegister",{data:null,error:s,loading:!1}),{data:null,error:s}}}},mutations:{updatePosts:(e,t)=>e.posts=t,updatePost:(e,t)=>e.currentPost=t,updateSendComment:(e,t)=>e.sendComment=t,updateLogout:(e,t)=>e.logoutUser=t,updateLogin:(e,t)=>e.loginUser=t,updateRegister:(e,t)=>e.registerUser=t},getters:{allPosts:e=>e.posts,currentPostUser:e=>e.currentPost,sendComment:e=>e.sendComment,getLogout:e=>e.logoutUser,getLoginUser:e=>e.loginUser,getRegisterUser:e=>e.registerUser}};var g=p;const f={state:{posts:[],post:{},updatePost:{},createPost:{},putPost:{},users:[],loginAdmin:{}},actions:{CREATE_POST:async({commit:e},{newPost:t})=>{e("updatePost",{data:null,error:null,loading:!0});try{const{data:n,status:a}=await c.Z.post("/admin/admin-posts",t);if(a>=400)throw new Error(n.message||"Что-то пошло не так");return e("updatePost",{data:n,error:null,loading:!1}),{...n,error:null}}catch(n){return e("updatePost",{data:null,error:n,loading:!1}),{data:null,error:n}}},GET_ALL_POST:async({commit:e})=>{e("updateAdminPosts",{data:null,error:null,loading:!0});try{const{data:t}=await c.Z.get("/admin/admin-posts");return e("updateAdminPosts",{...t,error:null,loading:!1}),{...t,error:null}}catch(t){const{data:{message:n},status:a}=t.response;return e("updateAdminPosts",{data:null,error:{message:n,status:a},loading:!1}),{data:null,error:{message:n,status:a}}}},GET_CURRENT_POST:async({commit:e},{id:t})=>{e("updateCurrentPost",{data:null,error:null,loading:!0});try{const{data:n}=await c.Z.get(`/admin/admin-posts/${t}`);return e("updateCurrentPost",{...n,error:null,loading:!1}),{...n,error:null}}catch(n){return e("updateCurrentPost",{data:null,error:n,loading:!1}),{data:null,error:n}}},UPDATE_POST:async({commit:e},{id:t,newPost:n})=>{e("updatePutPost",{data:null,error:null,loading:!0});try{const{data:a,status:o}=await c.Z.put(`/admin/admin-posts/${t.id}`,n);if(o>=400)throw new Error(a.message||"Что-то пошло не так");return e("updatePutPost",{data:a,error:null,loading:!1}),{data:a,error:null}}catch(a){return e("updatePutPost",{data:null,error:a,loading:!1}),{data:null,error:a}}},DELETE_POST:async({dispatch:e},{id:t})=>{await c.Z["delete"](`/admin/admin-posts/${t}`).then((()=>e("GET_ALL_POST"))).catch((e=>console.log(e)))},GET_ALL_USERS:async({commit:e})=>{e("updateUsers",{data:null,error:null,loading:!0});try{const{data:t,status:n}=await c.Z.get("/admin/admin-users");if(n>=400)throw new Error(t.message||"Что-то пошло не так");return e("updateUsers",{...t,error:null,loading:!1}),{data:t,error:null}}catch(t){return e("updatePutPost",{data:null,error:t,loading:!1}),{data:null,error:t}}},DELETE_USER:async({dispatch:e},{id:t})=>{await c.Z["delete"](`/admin/admin-users/${t}`).then((()=>e("GET_ALL_USERS"))).catch((e=>console.log(e)))},LOGIN_ADMIN:async({commit:e},{email:t,password:n})=>{c.Z.get("/sanctum/csrf-cookie").then((async()=>{e("updateLoginAdmin",{data:null,error:null,loading:!0});try{const{data:a,status:o}=await c.Z.post("/admin/login",{email:t,password:n});if(o>=400)throw new Error(a.message||"Что-то пошло не так");return localStorage.setItem("adminToken",a.token.plainTextToken),e("updateLoginAdmin",{data:a,error:null,loading:!1}),await u.Z.push({name:"AdminStatistics"}),{data:a,error:null}}catch(a){return e("updateLoginAdmin",{data:null,error:a,loading:!1}),{data:null,error:a}}}))}},mutations:{updateAdminPosts:(e,t)=>{e.posts=t},updateUsers:(e,t)=>{e.users=t},updatePutPost:(e,t)=>{e.putPost=t},updatePost:(e,t)=>{e.createPost=t},updateCurrentPost:(e,t)=>{e.post=t},updateLoginAdmin:(e,t)=>{console.log(t),e.loginAdmin=t}},getters:{getPostsAdmin:e=>e.posts,putPost:e=>e.putPost,createPost:e=>e.createPost,allUsers:e=>e.users,currentPost:e=>e.post,loginAdmin:e=>e.loginAdmin}};var h=f;const w={state:{token:null,name:null},actions:{checkToken:({commit:e,dispatch:t})=>{const n=localStorage.getItem("x_xsrf_token");return n?(e("updateToken",n),t("checkName")):e("updateToken",null)},checkName:async({commit:e})=>{e("updateName",{data:null,error:null,loading:!0});try{const{data:t,status:n}=await c.Z.get("/api/user");if(n>=400)throw new Error(t.message||"Что-то пошло не так");return e("updateName",{data:t,error:null,loading:!1}),{data:t,error:null}}catch(t){return e("updateName",{data:null,error:t}),{data:null,error:t}}}},mutations:{updateToken:(e,t)=>e.token=t,updateName:(e,t)=>e.name=t},getters:{getToken:e=>e.token,getName:e=>e.name}};var b=w,v=(0,m.MT)({state:{},mutations:{},actions:{},getters:{},modules:{user:g,admin:h,localStorage:b}}),_=n(3606);(0,a.ri)(d).use(v).use(u.Z).use(_.Z).mount("#app")},1777:function(e,t,n){n.d(t,{Z:function(){return Xa}});var a=n(2483),o=n(3396);function r(e,t,n,a,r,s){const i=(0,o.up)("BigBlog"),l=(0,o.up)("BlogsView");return(0,o.wg)(),(0,o.iD)("main",null,[(0,o.Wm)(i),(0,o.Wm)(l)])}const s=(0,o._)("div",{class:"container"},[(0,o._)("div",{class:"row mb-2"},[(0,o._)("div",{class:"col-md-6"},[(0,o._)("div",{class:"row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative"},[(0,o._)("div",{class:"col p-4 d-flex flex-column position-static"},[(0,o._)("strong",{class:"d-inline-block mb-2 text-primary"},"World"),(0,o._)("h3",{class:"mb-0"},"Featured post"),(0,o._)("div",{class:"mb-1 text-muted"},"Nov 12"),(0,o._)("p",{class:"card-text mb-auto"}," This is a wider card with supporting text below as a natural lead-in to additional content. "),(0,o._)("a",{href:"#",class:"stretched-link"},"Continue reading")]),(0,o._)("div",{class:"col-auto d-none d-lg-block"},[(0,o._)("svg",{class:"bd-placeholder-img",width:"200",height:"250",xmlns:"http://www.w3.org/2000/svg",role:"img","aria-label":"Placeholder: Thumbnail",preserveAspectRatio:"xMidYMid slice",focusable:"false"},[(0,o._)("title",null,"Placeholder"),(0,o._)("rect",{width:"100%",height:"100%",fill:"#55595c"}),(0,o._)("text",{x:"50%",y:"50%",fill:"#eceeef",dy:".3em"},"Thumbnail")])])])]),(0,o._)("div",{class:"col-md-6"},[(0,o._)("div",{class:"row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative"},[(0,o._)("div",{class:"col p-4 d-flex flex-column position-static"},[(0,o._)("strong",{class:"d-inline-block mb-2 text-success"},"Design"),(0,o._)("h3",{class:"mb-0"},"Post title"),(0,o._)("div",{class:"mb-1 text-muted"},"Nov 11"),(0,o._)("p",{class:"mb-auto"}," This is a wider card with supporting text below as a natural lead-in to additional content. "),(0,o._)("a",{href:"#",class:"stretched-link"},"Continue reading")]),(0,o._)("div",{class:"col-auto d-none d-lg-block"},[(0,o._)("svg",{class:"bd-placeholder-img",width:"200",height:"250",xmlns:"http://www.w3.org/2000/svg",role:"img","aria-label":"Placeholder: Thumbnail",preserveAspectRatio:"xMidYMid slice",focusable:"false"},[(0,o._)("title",null,"Placeholder"),(0,o._)("rect",{width:"100%",height:"100%",fill:"#55595c"}),(0,o._)("text",{x:"50%",y:"50%",fill:"#eceeef",dy:".3em"},"Thumbnail")])])])])])],-1),i=[s];function l(e,t,n,a,r,s){return(0,o.wg)(),(0,o.iD)("section",null,i)}var d={name:"BlogsView"},u=n(89);const m=(0,u.Z)(d,[["render",l]]);var c=m;const p=(0,o.uE)('<div class="container"><div class="p-4 p-md-5 mb-4 text-white rounded bg-dark"><div class="col-md-6 px-0"><h1 class="display-4 fst-italic"> Title of a longer featured blog post </h1><p class="lead my-3"> Multiple lines of text that form the lede, informing new readers quickly and efficiently about what’s most interesting in this post’s contents. </p><p class="lead mb-0"><a href="#" class="text-white fw-bold">Continue reading...</a></p></div></div></div>',1),g=[p];function f(e,t,n,a,r,s){return(0,o.wg)(),(0,o.iD)("section",null,g)}var h={name:"BigBlog"};const w=(0,u.Z)(h,[["render",f]]);var b=w,v={name:"HomeView",components:{BigBlog:b,BlogsView:c}};const _=(0,u.Z)(v,[["render",r]]);var y=_;const P={class:"container"},k={key:1,class:"row mb-5 g-3"};function x(e,t,n,a,r,s){const i=(0,o.up)("Loader"),l=(0,o.up)("BlogCard"),d=(0,o.up)("MessagePopup");return(0,o.wg)(),(0,o.iD)("main",P,[e.allPosts.loading?((0,o.wg)(),(0,o.j4)(i,{key:0})):(0,o.kq)("",!0),e.allPosts.posts?.data?((0,o.wg)(),(0,o.iD)("div",k,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.allPosts.posts.data,(e=>((0,o.wg)(),(0,o.j4)(l,{key:e.id,id:e.id,thumbnail:e.thumbnail,title:e.title,preview:e.preview,date:e.created_at},null,8,["id","thumbnail","title","preview","date"])))),128))])):(0,o.kq)("",!0),e.allPosts.error?((0,o.wg)(),(0,o.j4)(d,{key:2,message:e.allPosts.error},null,8,["message"])):(0,o.kq)("",!0)])}const S=e=>((0,o.dD)("data-v-a71f4502"),e=e(),(0,o.Cn)(),e),E={class:"lds-ellipsis"},T=S((()=>(0,o._)("div",null,null,-1))),A=S((()=>(0,o._)("div",null,null,-1))),L=S((()=>(0,o._)("div",null,null,-1))),C=S((()=>(0,o._)("div",null,null,-1))),D=[T,A,L,C];function U(e,t,n,a,r,s){return(0,o.wg)(),(0,o.iD)("div",E,D)}var I={name:"LoaderComp"};const R=(0,u.Z)(I,[["render",U],["__scopeId","data-v-a71f4502"]]);var Z=R,M=n(7139);const O=e=>((0,o.dD)("data-v-1291b935"),e=e(),(0,o.Cn)(),e),q={class:"col-3"},N={class:"row g-0 border rounded overflow-hidden flex-column shadow-sm position-relative"},W={class:"col-auto d-none d-lg-block"},j=["src"],F={class:"col p-4 m-0 d-flex flex-column position-static"},B=O((()=>(0,o._)("strong",{class:"d-inline-block mb-2 text-primary"},"World",-1))),G={class:"mb-0 text-nowrap overflow-hidden"},H={class:"mb-1 text-success"},V={class:"card-text mb-auto text-nowrap overflow-hidden"},z=(0,o.Uk)(" Continue reading ");function $(e,t,n,a,r,s){const i=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",q,[(0,o._)("div",N,[(0,o._)("div",W,[(0,o._)("img",{src:n.thumbnail,alt:""},null,8,j)]),(0,o._)("div",F,[B,(0,o._)("h3",G,(0,M.zw)(n.title),1),(0,o._)("div",H,(0,M.zw)(new Date(n.date).toLocaleString()),1),(0,o._)("div",V,(0,M.zw)(n.preview),1),(0,o.Wm)(i,{to:{name:"post",params:{id:n.id}},class:"stretched-link"},{default:(0,o.w5)((()=>[z])),_:1},8,["to"])])])])}var Y={props:{id:{type:Number},title:{type:String,default:null},preview:{type:String,default:null},date:{type:String,default:null},thumbnail:{type:String,default:null}},name:"BlogCard"};const K=(0,u.Z)(Y,[["render",$],["__scopeId","data-v-1291b935"]]);var X=K,J=n(65);const Q={class:"form-alert alert alert-danger position-absolute m-0",role:"alert"};function ee(e,t,n,a,r,s){return(0,o.wg)(),(0,o.iD)("div",Q,(0,M.zw)(n.message),1)}var te={props:{message:{type:String}},name:"MessagePopup"};const ne=(0,u.Z)(te,[["render",ee]]);var ae=ne,oe={name:"AllBlogs",components:{MessagePopup:ae,BlogCard:X,Loader:Z},methods:{...(0,J.nv)(["GET_POSTS_USER"])},computed:{...(0,J.Se)(["allPosts"])},mounted(){this.GET_POSTS_USER()}};const re=(0,u.Z)(oe,[["render",x]]);var se=re;function ie(e,t,n,a,r,s){const i=(0,o.up)("LoaderComp"),l=(0,o.up)("PostView"),d=(0,o.up)("MessagePopup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.currentPostUser.loading?((0,o.wg)(),(0,o.j4)(i,{key:0})):(0,o.kq)("",!0),e.currentPostUser.data?((0,o.wg)(),(0,o.j4)(l,{key:1,title:e.currentPostUser.data.title,date:new Date(e.currentPostUser.data.created_at).toLocaleString(),thumbnail:e.currentPostUser.data.thumbnail,description:e.currentPostUser.data.description,comments:e.currentPostUser.data.comments},null,8,["title","date","thumbnail","description","comments"])):(0,o.kq)("",!0),e.currentPostUser.error?((0,o.wg)(),(0,o.j4)(d,{key:2,message:e.currentPostUser?.error},null,8,["message"])):(0,o.kq)("",!0)],64)}const le=e=>((0,o.dD)("data-v-a623dab8"),e=e(),(0,o.Cn)(),e),de={class:"post-body mb-5 pb-5"},ue={class:"d-flex align-items-center"},me={class:"ms-4 p-2 fs-6 d-inline-block bg-success text-white rounded-pill"},ce={class:"text-center my-4"},pe=["src"],ge=["innerHTML"],fe={class:"form-floating"},he=le((()=>(0,o._)("label",{for:"floatingTextarea2"},"Оставьте комментарий",-1))),we={class:"btn btn-primary position-relative",type:"submit"},be={key:1},ve={key:1,class:"my-5 text-info"};function _e(e,t,n,a,r,s){const i=(0,o.up)("Field"),l=(0,o.up)("ErrorMessage"),d=(0,o.up)("LoaderComp"),u=(0,o.up)("Form"),m=(0,o.up)("CommentsView"),c=(0,o.up)("MessagePopup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("section",null,[(0,o._)("div",de,[(0,o._)("h1",ue,[(0,o.Uk)((0,M.zw)(n.title)+" ",1),(0,o._)("span",me,(0,M.zw)(n.date),1)]),(0,o._)("div",ce,[(0,o._)("img",{src:n.thumbnail,alt:"Изображение"},null,8,pe)]),(0,o._)("div",{innerHTML:n.description},null,8,ge),(0,o.Wm)(u,{class:"mt-5",onSubmit:s.onSubmit},{default:(0,o.w5)((()=>[(0,o._)("div",fe,[(0,o.Wm)(i,{name:"text",rules:"required",class:"form-control",placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"100px"}}),he,(0,o.Wm)(l,{name:"text",class:"error-message text-danger position-absolute"})]),(0,o._)("button",we,[e.sendComment.loading?((0,o.wg)(),(0,o.j4)(d,{key:0,class:"button-loader position-static"})):((0,o.wg)(),(0,o.iD)("span",be,"Оставить комментарий"))])])),_:1},8,["onSubmit"])]),n.comments.length?((0,o.wg)(),(0,o.j4)(m,{key:0,comments:n.comments},null,8,["comments"])):n.comments.length?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("h2",ve,"Комментарий нет"))]),e.sendComment.error?((0,o.wg)(),(0,o.j4)(c,{key:0,message:e.sendComment.error},null,8,["message"])):(0,o.kq)("",!0)],64)}const ye={class:"comments mt-5"},Pe=(0,o._)("h1",{class:"fs-3"},"Комментарии",-1),ke={class:"comments__body"},xe={class:"my-3 p-3 bg-body border rounded shadow-sm"};function Se(e,t,n,a,r,s){const i=(0,o.up)("CommentItem");return(0,o.wg)(),(0,o.iD)("div",ye,[Pe,(0,o._)("div",ke,[(0,o._)("div",xe,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.comments,(e=>((0,o.wg)(),(0,o.j4)(i,{key:e,text:e.text,date:new Date(e.created_at).toLocaleString(),name:e.user.name},null,8,["text","date","name"])))),128))])])])}const Ee={class:"d-flex text-muted border-bottom align-items-center py-3"},Te=(0,o._)("svg",{class:"bd-placeholder-img flex-shrink-0 me-2 rounded",width:"32",height:"32",xmlns:"http://www.w3.org/2000/svg",role:"img","aria-label":"Placeholder: 32x32",preserveAspectRatio:"xMidYMid slice",focusable:"false"},[(0,o._)("title",null,"Placeholder"),(0,o._)("rect",{width:"100%",height:"100%",fill:"#007bff"}),(0,o._)("text",{x:"50%",y:"50%",fill:"#007bff",dy:".3em"},"32x32")],-1),Ae={class:"mb-0 small lh-sm"},Le={class:"d-flex align-items-center text-gray-dark mb-3"},Ce={class:"d-inline-block ms-5"};function De(e,t,n,a,r,s){return(0,o.wg)(),(0,o.iD)("div",Ee,[Te,(0,o._)("p",Ae,[(0,o._)("strong",Le,[(0,o.Uk)((0,M.zw)(n.name)+" ",1),(0,o._)("span",Ce,(0,M.zw)(n.date),1)]),(0,o.Uk)(" "+(0,M.zw)(n.text),1)])])}var Ue={props:{text:{type:String},date:{type:String},name:{type:String}},name:"CommentItems"};const Ie=(0,u.Z)(Ue,[["render",De]]);var Re=Ie,Ze={props:{comments:{type:Object}},name:"CommentsView",components:{CommentItem:Re}};const Me=(0,u.Z)(Ze,[["render",Se]]);var Oe=Me,qe=n(5708);(0,qe.aH)("required",(e=>!!e||"Комментарий не должен быть пустым"));var Ne={props:{title:{type:String},date:{type:String},thumbnail:{type:String},description:{type:String},comments:{type:Array}},name:"PostView",components:{LoaderComp:Z,MessagePopup:ae,Field:qe.gN,Form:qe.l0,ErrorMessage:qe.Bc,CommentsView:Oe},methods:{...(0,J.nv)(["SEND_COMMENT","GET_POST_USER"]),onSubmit(e){this.SEND_COMMENT({id:this.$route.params,message:e.text}).then((()=>{this.GET_POST_USER(this.$route.params)}))}},computed:{...(0,J.Se)(["sendComment"])}};const We=(0,u.Z)(Ne,[["render",_e],["__scopeId","data-v-a623dab8"]]);var je=We,Fe={name:"PostLayout",components:{PostView:je,MessagePopup:ae,LoaderComp:Z},methods:{...(0,J.nv)(["GET_POST_USER"])},computed:{...(0,J.Se)(["currentPostUser"])},mounted(){this.GET_POST_USER(this.$route.params)}};const Be=(0,u.Z)(Fe,[["render",ie],["__scopeId","data-v-4cfc861f"]]);var Ge=Be;const He=e=>((0,o.dD)("data-v-05f64400"),e=e(),(0,o.Cn)(),e),Ve={class:"form-signin w-100 m-auto"},ze=He((()=>(0,o._)("h1",{class:"h3 mb-3 fw-normal"},"Авторизация",-1))),$e={class:"form-floating"},Ye=He((()=>(0,o._)("label",{for:"floatingInput"},"Почта",-1))),Ke={class:"form-floating"},Xe=He((()=>(0,o._)("label",{for:"floatingPassword"},"Пароль",-1))),Je=["disabled"],Qe={key:1},et=(0,o.Uk)(" Регистрация "),tt=He((()=>(0,o._)("p",{class:"mt-3 mb-3 text-muted"},"© Maksim Barabanshikov",-1))),nt={key:0,class:"form-alert alert alert-danger position-absolute m-0",role:"alert"};function at(e,t,n,a,r,s){const i=(0,o.up)("Field"),l=(0,o.up)("ErrorMessage"),d=(0,o.up)("Loader"),u=(0,o.up)("router-link"),m=(0,o.up)("Form");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",Ve,[(0,o.Wm)(m,{onSubmit:s.onSubmit},{default:(0,o.w5)((()=>[ze,(0,o._)("div",$e,[(0,o.Wm)(i,{rules:"required|email",name:"email",type:"email",class:"form-control",id:"floatingInput",placeholder:"name@example.com"}),Ye,(0,o.Wm)(l,{class:"error-message text-danger position-absolute",name:"email"})]),(0,o._)("div",Ke,[(0,o.Wm)(i,{rules:"required|min:5",name:"password",type:"password",class:"form-control",id:"floatingPassword",placeholder:"Password"}),Xe,(0,o.Wm)(l,{class:"error-message text-danger position-absolute",name:"password"})]),(0,o._)("button",{class:"w-100 btn btn-lg btn-primary mb-2 position-relative",type:"submit",disabled:e.getLoginUser.loading},[e.getLoginUser.loading?((0,o.wg)(),(0,o.j4)(d,{key:0,class:"spin"})):((0,o.wg)(),(0,o.iD)("span",Qe,"Войти"))],8,Je),(0,o.Wm)(u,{to:"/reg",type:"submit"},{default:(0,o.w5)((()=>[et])),_:1}),tt])),_:1},8,["onSubmit"])]),e.getLoginUser.error?((0,o.wg)(),(0,o.iD)("div",nt,(0,M.zw)(e.getLoginUser.error),1)):(0,o.kq)("",!0)],64)}(0,qe.aH)("email",(e=>{const t=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;return!!t.test(e)||"Такая почта не действительна"})),(0,qe.aH)("required",(e=>!!e||"Обязательное поле")),(0,qe.aH)("min",((e,[t])=>!(e&&e.length<t)||`Пароль должен содержать не менее ${t} символов  `));var ot={name:"AuthUser",components:{Loader:Z,Form:qe.l0,Field:qe.gN,ErrorMessage:qe.Bc},methods:{...(0,J.nv)(["LOGIN_USER","checkToken"]),onSubmit(e){this.LOGIN_USER(e).then((()=>{}))}},computed:{...(0,J.Se)(["getLoginUser"])}};const rt=(0,u.Z)(ot,[["render",at],["__scopeId","data-v-05f64400"]]);var st=rt;const it={class:"form-signin w-100 m-auto"},lt=(0,o._)("h1",{class:"h3 mb-3 fw-normal"},"Регистрация",-1),dt={class:"form-floating"},ut=(0,o._)("label",{for:"floatingName"},"Имя",-1),mt={class:"form-floating"},ct=(0,o._)("label",{for:"floatingEmail"},"Почта",-1),pt={class:"form-floating"},gt=(0,o._)("label",{for:"floatingPassword"},"Пароль",-1),ft={class:"form-floating"},ht=(0,o._)("label",{for:"password_confirmation"},"Подтвердите пароль",-1),wt=["disabled"],bt={key:1},vt=(0,o.Uk)(" Вход "),_t=(0,o._)("p",{class:"mt-3 mb-3 text-muted"},"© Maksim Barabanshikov",-1),yt={key:0,class:"form-alert alert alert-danger position-absolute m-0",role:"alert"};function Pt(e,t,n,a,r,s){const i=(0,o.up)("Field"),l=(0,o.up)("ErrorMessage"),d=(0,o.up)("LoaderComp"),u=(0,o.up)("router-link"),m=(0,o.up)("Form");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",it,[(0,o.Wm)(m,{onSubmit:s.onSubmit},{default:(0,o.w5)((()=>[lt,(0,o._)("div",dt,[(0,o.Wm)(i,{name:"name",type:"text",class:"form-control",id:"floatingName",placeholder:"Иван Иванов",rules:"required"}),(0,o.Wm)(l,{class:"error-message text-danger position-absolute",name:"name"}),ut]),(0,o._)("div",mt,[(0,o.Wm)(i,{name:"email",type:"email",class:"form-control",id:"floatingEmail",placeholder:"name@example.com",rules:"required|email"}),(0,o.Wm)(l,{class:"error-message text-danger position-absolute",name:"email"}),ct]),(0,o._)("div",pt,[(0,o.Wm)(i,{name:"password",type:"password",class:"form-control",id:"floatingPassword",placeholder:"Password",rules:"required|min:5"}),(0,o.Wm)(l,{class:"error-message text-danger position-absolute",name:"password"}),gt]),(0,o._)("div",ft,[(0,o.Wm)(i,{name:"password_confirmation",type:"password",class:"form-control",id:"password_confirmation",placeholder:"Password",rules:"required|confirmed:@password"}),(0,o.Wm)(l,{class:"error-message text-danger position-absolute",name:"passwordConfirmation"}),ht]),(0,o._)("button",{class:"form-button w-100 btn btn-lg btn-success mb-2 position-relative",type:"submit",disabled:e.getRegisterUser.loading},[e.getRegisterUser.loading?((0,o.wg)(),(0,o.j4)(d,{key:0,class:"spin"})):((0,o.wg)(),(0,o.iD)("span",bt,"Регистрация"))],8,wt),(0,o.Wm)(u,{to:"/auth",type:"submit"},{default:(0,o.w5)((()=>[vt])),_:1}),_t])),_:1},8,["onSubmit"])]),e.getRegisterUser.error?((0,o.wg)(),(0,o.iD)("div",yt,(0,M.zw)(e.getRegisterUser.error),1)):(0,o.kq)("",!0)],64)}(0,qe.aH)("required",(e=>!!e||"Обязательное поле")),(0,qe.aH)("min",((e,[t])=>!(e&&e.length<t)||`Пароль должен содержать не менее ${t} символов  `)),(0,qe.aH)("confirmed",((e,[t])=>e===t||"Пароли не совпадают")),(0,qe.aH)("email",(e=>{const t=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;return!!t.test(e)||"Такая почта не действительна"}));var kt={name:"RegisterUser",components:{Form:qe.l0,Field:qe.gN,ErrorMessage:qe.Bc,LoaderComp:Z},methods:{...(0,J.nv)(["REGISTER"]),onSubmit(e){this.REGISTER(e)}},computed:{...(0,J.Se)(["getRegisterUser"])}};const xt=(0,u.Z)(kt,[["render",Pt]]);var St=xt;const Et=e=>((0,o.dD)("data-v-3d93177c"),e=e(),(0,o.Cn)(),e),Tt={class:"form-signin w-100 m-auto"},At=Et((()=>(0,o._)("h1",{class:"h3 mb-3 fw-normal"},"Admin Авторизация",-1))),Lt={class:"form-floating"},Ct=Et((()=>(0,o._)("label",{for:"floatingInput"},"Почта",-1))),Dt={class:"form-floating"},Ut=Et((()=>(0,o._)("label",{for:"floatingPassword"},"Пароль",-1))),It=["disabled"],Rt={key:1},Zt=Et((()=>(0,o._)("p",{class:"mt-3 mb-3 text-muted"},"© Maksim Barabanshikov",-1)));function Mt(e,t,n,a,r,s){const i=(0,o.up)("Field"),l=(0,o.up)("ErrorMessage"),d=(0,o.up)("LoaderComp"),u=(0,o.up)("Form"),m=(0,o.up)("MessagePopup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",Tt,[(0,o.Wm)(u,{method:"post",onSubmit:s.onSubmit},{default:(0,o.w5)((()=>[At,(0,o._)("div",Lt,[(0,o.Wm)(i,{rules:"required|email",name:"email",type:"email",class:"form-control",id:"floatingInput",placeholder:"name@example.com"}),Ct,(0,o.Wm)(l,{class:"error-message text-danger position-absolute",name:"email"})]),(0,o._)("div",Dt,[(0,o.Wm)(i,{rules:"required|min:5",name:"password",type:"password",class:"form-control",id:"floatingPassword",placeholder:"Password"}),Ut,(0,o.Wm)(l,{class:"error-message text-danger position-absolute",name:"password"})]),(0,o._)("button",{class:"w-100 btn btn-lg btn-primary mb-2 position-relative",type:"submit",disabled:e.loginAdmin.loading},[e.loginAdmin.loading?((0,o.wg)(),(0,o.j4)(d,{key:0,class:"spin"})):((0,o.wg)(),(0,o.iD)("span",Rt,"Войти"))],8,It),Zt])),_:1},8,["onSubmit"])]),e.loginAdmin.error?((0,o.wg)(),(0,o.j4)(m,{key:0,message:e.loginAdmin.error},null,8,["message"])):(0,o.kq)("",!0)],64)}(0,qe.aH)("email",(e=>{const t=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;return!!t.test(e)||"Такая почта не действительна"})),(0,qe.aH)("required",(e=>!!e||"Обязательное поле")),(0,qe.aH)("min",((e,[t])=>!(e&&e.length<t)||`Пароль должен содержать не менее ${t} символов  `));var Ot={name:"AdminAuth",components:{MessagePopup:ae,LoaderComp:Z,Form:qe.l0,Field:qe.gN,ErrorMessage:qe.Bc},methods:{...(0,J.nv)(["LOGIN_ADMIN"]),onSubmit(e){this.LOGIN_ADMIN(e)}},computed:{...(0,J.Se)(["loginAdmin"])}};const qt=(0,u.Z)(Ot,[["render",Mt],["__scopeId","data-v-3d93177c"]]);var Nt=qt;const Wt=(0,o._)("div",{class:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},[(0,o._)("h1",{class:"h2"},"Статистика")],-1),jt=(0,o._)("section",null,[(0,o._)("h4",null,"Постов: 10"),(0,o._)("h4",null,"Пользователей: 30")],-1);function Ft(e,t,n,a,r,s){return(0,o.wg)(),(0,o.iD)(o.HY,null,[Wt,jt],64)}var Bt={name:"AdminStatistics"};const Gt=(0,u.Z)(Bt,[["render",Ft]]);var Ht=Gt;const Vt={class:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},zt=(0,o._)("h1",{class:"h2"},"Пост",-1),$t=(0,o.Uk)(" Добавить пост "),Yt=(0,o.Uk)(" К постам ");function Kt(e,t,n,a,r,s){const i=(0,o.up)("router-link"),l=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",Vt,[zt,"AdminGetPosts"===e.$route.name?((0,o.wg)(),(0,o.j4)(i,{key:0,to:{name:"AddPost"},class:"btn btn-success"},{default:(0,o.w5)((()=>[$t])),_:1})):((0,o.wg)(),(0,o.j4)(i,{key:1,to:{name:"AdminGetPosts"},class:"btn btn-success"},{default:(0,o.w5)((()=>[Yt])),_:1}))]),(0,o.Wm)(l)],64)}var Xt={name:"AdminPostLayout"};const Jt=(0,u.Z)(Xt,[["render",Kt]]);var Qt=Jt;const en={class:"d-flex align-items-center mb-4"},tn={class:"d-flex align-items-center me-2"};function nn(e,t,n,a,r,s){const i=(0,o.up)("Loader"),l=(0,o.up)("AdminPostEl");return(0,o.wg)(),(0,o.iD)("section",null,[(0,o._)("div",en,[(0,o._)("div",tn,[(0,o._)("button",{class:(0,M.C_)(["btn btn-outline-primary mb-0 me-2","panel"===e.activeView?"active":""]),onClick:t[0]||(t[0]=e=>s.changeActive("panel"))}," По 1 ",2),(0,o._)("button",{class:(0,M.C_)(["btn btn-outline-primary mb-0 me-2","tile"===e.activeView?"active":""]),onClick:t[1]||(t[1]=e=>s.changeActive("tile"))}," По 4 ",2)])]),e.getPostsAdmin.loading?((0,o.wg)(),(0,o.j4)(i,{key:0})):e.getPostsAdmin.data&&!1===e.getPostsAdmin.loading?((0,o.wg)(),(0,o.iD)("div",{key:1,class:(0,M.C_)(["admin-panel__posts",e.activeView])},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.getPostsAdmin.data,(t=>((0,o.wg)(),(0,o.j4)(l,{key:t.id,id:t.id,title:t.title,thumbnail:t.thumbnail,preview:t.preview,date:t.created_at,comments:t.comments.length,typeBlock:e.activeView},null,8,["id","title","thumbnail","preview","date","comments","typeBlock"])))),128))],2)):(0,o.kq)("",!0)])}var an=n(9242);const on={class:"admin-panel__posts_post bg-white border rounded-3 overflow-hidden d-flex flex-column h-100"},rn={class:"d-flex justify-content-between align-items-center border-bottom bg-light p-3"},sn={class:"fs-5 mb-0 text-secondary text-uppercase"},ln=["src"],dn={class:"mb-2"},un={class:"mb-0"},mn=(0,o.Uk)(" Просмотр "),cn=(0,o.Uk)(" Редактировать ");function pn(e,t,n,a,r,s){const i=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",on,[(0,o._)("div",rn,[(0,o._)("h1",sn,(0,M.zw)(n.title),1),(0,o._)("span",null,(0,M.zw)(new Date(n.date).toLocaleString()),1)]),(0,o._)("div",{class:(0,M.C_)(["post-content p-3 d-flex justify-content-between flex-grow-1","panel"===n.typeBlock?"flex-row align-items-center":"flex-column"])},[(0,o._)("div",null,[(0,o._)("img",{src:n.thumbnail,alt:"Пост"},null,8,ln),(0,o._)("p",dn,(0,M.zw)(n.preview),1),(0,o._)("p",un,"Комментариев: "+(0,M.zw)(n.comments),1)]),(0,o._)("div",{class:(0,M.C_)(["d-flex","panel"!==n.typeBlock?"mt-1":""])},[(0,o.Wm)(i,{to:{name:"ViewPost",params:{id:n.id}},class:"btn btn-info me-2"},{default:(0,o.w5)((()=>[mn])),_:1},8,["to"]),(0,o.Wm)(i,{to:{name:"EditPost",params:{id:n.id}},class:"btn btn-warning me-2"},{default:(0,o.w5)((()=>[cn])),_:1},8,["to"]),(0,o._)("button",{class:"btn btn-danger",onClick:t[0]||(t[0]=(0,an.iM)((t=>e.DELETE_POST({id:n.id})),["prevent"]))}," Удалить ")],2)],2)])}var gn={props:{id:{type:Number},title:{type:String},preview:{type:String},thumbnail:{type:String},date:{type:String},comments:{type:Number,default:0},typeBlock:{type:String}},name:"AdminPostEl",methods:{...(0,J.nv)(["DELETE_POST"])}};const fn=(0,u.Z)(gn,[["render",pn]]);var hn=fn,wn={name:"AdminPosts",components:{Loader:Z,AdminPostEl:hn},data:()=>({activeView:"tile"}),methods:{...(0,J.nv)(["GET_ALL_POST"]),changeActive(e){this.activeView=e}},computed:{...(0,J.Se)(["getPostsAdmin"])},mounted(){this.GET_ALL_POST()}};const bn=(0,u.Z)(wn,[["render",nn]]);var vn=bn;const _n=e=>((0,o.dD)("data-v-71e82f1e"),e=e(),(0,o.Cn)(),e),yn=_n((()=>(0,o._)("h4",{class:"py-3"},"Добавить новый пост",-1))),Pn={class:"form-floating"},kn=_n((()=>(0,o._)("label",{for:"floatingTitle"},"Заголовок",-1))),xn={class:"form-floating"},Sn=_n((()=>(0,o._)("label",{for:"floatingPreview"},"Описание",-1))),En=_n((()=>(0,o._)("img",{id:"previewImage",src:"",alt:""},null,-1))),Tn={class:"position-static d-flex flex-column px-0"},An=(0,o.Uk)(" Превью "),Ln=_n((()=>(0,o._)("label",{class:"my-4"}," Контент поста ",-1))),Cn={class:"form-button w-50 btn btn-lg btn-primary mb-2 position-relative mt-4",type:"submit"},Dn={key:1},Un={key:2};function In(e,t,n,a,r,s){const i=(0,o.up)("Field"),l=(0,o.up)("ErrorMessage"),d=(0,o.up)("CreditorComp"),u=(0,o.up)("LoaderComp"),m=(0,o.up)("Form");return(0,o.wg)(),(0,o.iD)("div",null,[yn,(0,o.Wm)(m,{enctype:"multipart/form-data",onSubmit:s.onSubmit},{default:(0,o.w5)((()=>[(0,o._)("div",Pn,[(0,o.Wm)(i,{name:"title",type:"text",class:"form-control",id:"floatingTitle",placeholder:"Название поста",rules:"required"}),(0,o.Wm)(l,{class:"error-message text-danger position-absolute",name:"title"}),kn]),(0,o._)("div",xn,[(0,o.Wm)(i,{name:"preview",type:"email",class:"form-control",id:"floatingPreview",placeholder:"Краткое описание блога",rules:"required"}),(0,o.Wm)(l,{class:"error-message text-danger position-absolute",name:"email"}),Sn]),En,(0,o._)("label",Tn,[An,(0,o._)("input",{class:"mt-2",name:"thumbnail",type:"file",accept:"image/png, image/gif, image/jpeg",ref:"file",onChange:t[0]||(t[0]=(0,an.iM)(((...e)=>s.uploadImage&&s.uploadImage(...e)),["prevent"]))},null,544)]),Ln,(0,o.Wm)(d,{onInputListener:s.currentValue},null,8,["onInputListener"]),(0,o.Wm)(i,{name:"description",type:"text",class:"visually-hidden",modelValue:e.description,"onUpdate:modelValue":t[1]||(t[1]=t=>e.description=t),rules:"required"},null,8,["modelValue"]),(0,o._)("button",Cn,[e.createPost.loading?((0,o.wg)(),(0,o.j4)(u,{key:0})):(0,o.kq)("",!0),e.createPost.error?((0,o.wg)(),(0,o.iD)("span",Dn,(0,M.zw)(e.createPost.error),1)):(0,o.kq)("",!0),e.createPost.error?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("span",Un,"Добавить пост"))])])),_:1},8,["onSubmit"])])}const Rn={class:"mt-4"},Zn=(0,o._)("div",{id:"resultingText"},null,-1);function Mn(e,t,n,a,r,s){const i=(0,o.up)("ckeditor");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(i,{onInput:s.inputListener,modelValue:r.editorData,"onUpdate:modelValue":t[0]||(t[0]=e=>r.editorData=e),editor:r.editor,config:r.editorConfig},null,8,["onInput","modelValue","editor","config"]),(0,o._)("div",Rn,[(0,o._)("button",{class:"btn btn-success me-3",onClick:t[1]||(t[1]=e=>s.sendEditorData())}," Результат "),(0,o._)("button",{class:"btn btn-danger",onClick:t[2]||(t[2]=e=>s.emptyEditor())},"Очистить")]),Zn],64)}var On=n(6713),qn=n.n(On);class Nn{constructor(e){this.loader=e}abort(){this.xhr&&this.xhr.abort()}_initRequest(){const e=this.xhr=new XMLHttpRequest;e.open("POST","<url here>",!0),e.responseType="json"}_initListeners(e,t,n){const a=this.xhr,o=this.loader,r=`Couldn't upload file: ${n.name}.`;a.addEventListener("error",(()=>t(r))),a.addEventListener("abort",(()=>t())),a.addEventListener("load",(()=>{const n=a.response;if(!n||n.error)return t(n&&n.error?n.error.message:r);e({default:n.url})})),a.upload&&a.upload.addEventListener("progress",(e=>{e.lengthComputable&&(o.uploadTotal=e.total,o.uploaded=e.loaded)}))}_sendRequest(e){const t=new FormData;t.append("upload",e),this.xhr.send(t)}}var Wn=n(9907),jn=n.n(Wn),Fn={props:{content:String,default:null},name:"CreditorComp",components:{ckeditor:jn().component},data(){return{editor:qn(),editorData:"",editorConfig:{extraPlugins:[this.uploader]}}},mounted(){this.content&&(this.editorData=this.content),console.log("Component mounted.")},methods:{emptyEditor(){this.editorData=""},inputListener(){return this.$emit("inputListener",this.editorData)},sendEditorData(){return this.$emit("editorData",this.editorData)},displayEditorResult(){document.getElementById("resultingText").innerHTML=this.editorData},uploader(e){e.plugins.get("FileRepository").createUploadAdapter=e=>new Nn(e)}}};const Bn=(0,u.Z)(Fn,[["render",Mn]]);var Gn=Bn;(0,qe.aH)("required",(e=>!!e||"Обязательное поле"));var Hn={components:{CreditorComp:Gn,LoaderComp:Z,Form:qe.l0,Field:qe.gN,ErrorMessage:qe.Bc},name:"AddPost",emits:["inputListener"],data:()=>({description:"",image:null}),computed:{...(0,J.Se)(["createPost"])},methods:{onSubmit(e){this.CREATE_POST({newPost:{title:e.title,description:e.description,preview:e.preview,thumbnail:this.image}})},currentValue(e){this.description=e},uploadImage(){window.File&&window.FileReader&&window.FileList&&window.Blob||alert("Файловые API не полностью поддерживаются в этом браузере.");const e=this.$refs.file.files.item(0),t=new FileReader;t.onload=e=>{document.getElementById("previewImage").src=e.target.result,this.image=e.target.result},t.readAsDataURL(e)},...(0,J.nv)(["CREATE_POST"])}};const Vn=(0,u.Z)(Hn,[["render",In],["__scopeId","data-v-71e82f1e"]]);var zn=Vn;const $n=e=>((0,o.dD)("data-v-25786e87"),e=e(),(0,o.Cn)(),e),Yn={key:1},Kn=$n((()=>(0,o._)("h4",{class:"py-3"},"Редактировать пост",-1))),Xn={class:"form-floating"},Jn=$n((()=>(0,o._)("label",{for:"floatingTitle"},"Заголовок",-1))),Qn={class:"form-floating"},ea=$n((()=>(0,o._)("label",{for:"floatingPreview"},"Описание",-1))),ta=["src"],na={class:"position-static d-flex flex-column px-0"},aa=(0,o.Uk)(" Превью "),oa=$n((()=>(0,o._)("label",{class:"my-4"}," Контент поста ",-1))),ra={class:"form-button w-50 btn btn-lg btn-primary mb-2 position-relative mt-4",type:"submit"},sa={key:1},ia={key:2};function la(e,t,n,a,r,s){const i=(0,o.up)("Loader"),l=(0,o.up)("Field"),d=(0,o.up)("ErrorMessage"),u=(0,o.up)("creditor"),m=(0,o.up)("Form");return e.currentPost.loading?((0,o.wg)(),(0,o.j4)(i,{key:0})):e.currentPost.data&&!e.currentPost.loading?((0,o.wg)(),(0,o.iD)("div",Yn,[Kn,(0,o.Wm)(m,{enctype:"multipart/form-data",onSubmit:s.onSubmit},{default:(0,o.w5)((()=>[(0,o._)("div",Xn,[(0,o.Wm)(l,{name:"title",type:"text",class:"form-control",id:"floatingTitle",placeholder:"",value:e.currentPost.data.title,rules:"required"},null,8,["value"]),(0,o.Wm)(d,{class:"error-message text-danger position-absolute",name:"title"}),Jn]),(0,o._)("div",Qn,[(0,o.Wm)(l,{name:"preview",type:"text",class:"form-control",id:"floatingPreview",placeholder:"Краткое описание блога",value:e.currentPost.data.preview,rules:"required"},null,8,["value"]),(0,o.Wm)(d,{class:"error-message text-danger position-absolute",name:"preview"}),ea]),(0,o._)("img",{id:"previewImage",src:e.currentPost.data.thumbnail,alt:""},null,8,ta),(0,o._)("label",na,[aa,(0,o._)("input",{class:"mt-2",name:"thumbnail",type:"file",accept:"image/png, image/gif, image/jpeg",ref:"file",onChange:t[0]||(t[0]=(0,an.iM)(((...e)=>s.uploadImage&&s.uploadImage(...e)),["prevent"]))},null,544)]),oa,(0,o.Wm)(u,{content:e.currentPost.data.description,onInputListener:s.currentValue},null,8,["content","onInputListener"]),(0,o.Wm)(l,{name:"description",type:"text",class:"visually-hidden",modelValue:e.description,"onUpdate:modelValue":t[1]||(t[1]=t=>e.description=t),rules:"required"},null,8,["modelValue"]),(0,o._)("button",ra,[e.putPost.loading?((0,o.wg)(),(0,o.j4)(i,{key:0})):(0,o.kq)("",!0),null!==e.putPost.error?((0,o.wg)(),(0,o.iD)("span",sa,(0,M.zw)(e.putPost.error),1)):(0,o.kq)("",!0),e.putPost.error?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("span",ia,"Изменить пост"))])])),_:1},8,["onSubmit"])])):(0,o.kq)("",!0)}var da={name:"EditPost",emits:["inputListener"],data:()=>({description:"",image:null}),components:{creditor:Gn,Form:qe.l0,Field:qe.gN,ErrorMessage:qe.Bc,Loader:Z},methods:{...(0,J.nv)(["GET_CURRENT_POST","UPDATE_POST"]),onSubmit(e){this.UPDATE_POST({id:this.$route.params,newPost:{title:e.title,description:e.description,preview:e.preview,thumbnail:this.image}})},currentValue(e){this.description=e},uploadImage(){window.File&&window.FileReader&&window.FileList&&window.Blob||alert("Файловые API не полностью поддерживаются в этом браузере.");const e=this.$refs.file.files.item(0),t=new FileReader;t.onload=e=>{document.getElementById("previewImage").src=e.target.result,this.image=e.target.result},t.readAsDataURL(e)}},computed:{...(0,J.Se)(["currentPost","putPost"])},mounted(){this.GET_CURRENT_POST(this.$route.params)}};const ua=(0,u.Z)(da,[["render",la],["__scopeId","data-v-25786e87"]]);var ma=ua;const ca=e=>((0,o.dD)("data-v-5750a32c"),e=e(),(0,o.Cn)(),e),pa={key:1},ga={class:"post-body mb-5 pb-5"},fa={class:"d-flex align-items-center"},ha={class:"ms-4 p-2 fs-6 d-inline-block bg-success text-white rounded-pill"},wa={class:"text-center my-4"},ba=["src"],va=["innerHTML"],_a={class:"form-floating"},ya=ca((()=>(0,o._)("label",{for:"floatingTextarea2"},"Оставьте комментарий",-1))),Pa={key:1,class:"mt-5 text-info"},ka={key:2,class:"text-danger"};function xa(e,t,n,a,r,s){const i=(0,o.up)("Loader"),l=(0,o.up)("Field"),d=(0,o.up)("ErrorMessage"),u=(0,o.up)("Form"),m=(0,o.up)("CommentsView");return(0,o.wg)(),(0,o.iD)("div",null,[e.currentPost.loading?((0,o.wg)(),(0,o.j4)(i,{key:0})):e.currentPost.data&&!1===e.currentPost.loading?((0,o.wg)(),(0,o.iD)("div",pa,[(0,o._)("div",ga,[(0,o._)("h1",fa,[(0,o.Uk)((0,M.zw)(e.currentPost.data.title)+" ",1),(0,o._)("span",ha,(0,M.zw)(new Date(e.currentPost.data.created_at).toLocaleString()),1)]),(0,o._)("div",wa,[(0,o._)("img",{src:e.currentPost.data.thumbnail,alt:"Изображение"},null,8,ba)]),(0,o._)("div",{innerHTML:e.currentPost.data.description},null,8,va)]),(0,o.Wm)(u,{class:"mt-5"},{default:(0,o.w5)((()=>[(0,o._)("div",_a,[(0,o.Wm)(l,{name:"text",rules:"required",class:"form-control",placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"100px"}}),ya,(0,o.Wm)(d,{name:"text",class:"error-message text-danger position-absolute"})]),(0,o._)("button",{class:"btn btn-primary",type:"submit",onClick:t[0]||(t[0]=(...t)=>e.getLog&&e.getLog(...t))}," Оставить комментарий ")])),_:1}),e.currentPost.data.comments.length?((0,o.wg)(),(0,o.j4)(m,{key:0,comments:e.currentPost.data.comments},null,8,["comments"])):e.currentPost.data.comments.length?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("h2",Pa," Комментарий нет "))])):(0,o.kq)("",!0),null!==e.currentPost.error?((0,o.wg)(),(0,o.iD)("h1",ka,(0,M.zw)(e.currentPost.error),1)):(0,o.kq)("",!0)])}var Sa={name:"ViewPost",components:{Field:qe.gN,Form:qe.l0,ErrorMessage:qe.Bc,CommentsView:Oe,Loader:Z},methods:{...(0,J.nv)(["GET_CURRENT_POST"])},computed:{...(0,J.Se)(["currentPost"])},mounted(){console.log(this.$route.params),this.GET_CURRENT_POST(this.$route.params)}};const Ea=(0,u.Z)(Sa,[["render",xa],["__scopeId","data-v-5750a32c"]]);var Ta=Ea;const Aa=(0,o._)("div",{class:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},[(0,o._)("h1",{class:"h2"},"Пользователи")],-1),La={class:"row g-4"};function Ca(e,t,n,a,r,s){const i=(0,o.up)("AdminUsers");return(0,o.wg)(),(0,o.iD)(o.HY,null,[Aa,(0,o._)("section",null,[(0,o._)("div",La,[(0,o.Wm)(i)])])],64)}const Da={key:1,class:"admin-panel__users row g-4"};function Ua(e,t,n,a,r,s){const i=(0,o.up)("Loader"),l=(0,o.up)("AdminUserEl");return e.allUsers.loading?((0,o.wg)(),(0,o.j4)(i,{key:0})):e.allUsers.data?((0,o.wg)(),(0,o.iD)("div",Da,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.allUsers.data,(e=>((0,o.wg)(),(0,o.j4)(l,{key:e.id,id:e.id,name:e.name,email:e.email,date:s.normalizeDate(e.created_at)},null,8,["id","name","email","date"])))),128))])):(0,o.kq)("",!0)}const Ia={class:"col-2"},Ra={class:"border rounded d-flex flex-column justify-content-between h-100 p-3 text-center"},Za={class:"mb-2"},Ma={class:"mb-2"},Oa={class:"d-flex justify-content-around"};function qa(e,t,n,a,r,s){return(0,o.wg)(),(0,o.iD)("div",Ia,[(0,o._)("div",Ra,[(0,o._)("div",null,[(0,o._)("h4",Za,(0,M.zw)(n.name),1),(0,o._)("p",Ma,(0,M.zw)(n.email),1),(0,o._)("span",null,"Зарегистрирован: "+(0,M.zw)(n.date),1)]),(0,o._)("div",Oa,[(0,o._)("button",{class:"btn w-100 btn-danger fs-6",onClick:t[0]||(t[0]=(0,an.iM)((t=>e.DELETE_USER({id:n.id})),["prevent"]))}," Удалить ")])])])}var Na={name:"AdminUserEl",props:{id:{type:Number},name:{type:String},email:{type:String},date:{type:String}},methods:{...(0,J.nv)(["DELETE_USER"])}};const Wa=(0,u.Z)(Na,[["render",qa]]);var ja=Wa,Fa={name:"AdminUsers",components:{AdminUserEl:ja,Loader:Z},methods:{...(0,J.nv)(["GET_ALL_USERS"]),normalizeDate:e=>{const t=new Date(e);return("0"+t.getDate()).slice(-2)+"."+("0"+(t.getDate()+1)).slice(-2)+"."+t.getFullYear()}},computed:{...(0,J.Se)(["allUsers"])},mounted(){this.GET_ALL_USERS()}};const Ba=(0,u.Z)(Fa,[["render",Ua]]);var Ga=Ba,Ha={name:"AdminUserLayout",components:{AdminUsers:Ga}};const Va=(0,u.Z)(Ha,[["render",Ca]]);var za=Va,$a=n(377);const Ya=[{path:"/",name:"welcome",component:()=>n.e(773).then(n.bind(n,2735))},{path:"/footer",name:"footer",component:$a.Z},{path:"/home",name:"mainLayout",component:()=>n.e(179).then(n.bind(n,6517)),children:[{path:"",name:"blog",component:y},{path:"/all-blogs",name:"all-blogs",component:se},{path:"/post/:id",name:"post",component:Ge},{path:"/auth",name:"auth",component:st},{path:"/reg",name:"reg",component:St},{path:"/admin/login",name:"AdminLogin",component:Nt}]},{path:"/admin/panel",name:"AdminPanel",component:()=>n.e(651).then(n.bind(n,5777)),children:[{path:"",name:"AdminStatistics",component:Ht},{path:"posts",name:"AdminPosts",component:Qt,children:[{path:"",name:"AdminGetPosts",component:vn},{path:"add",name:"AddPost",component:zn},{path:"edit/:id",name:"EditPost",component:ma},{path:"view/:id",name:"ViewPost",component:Ta}]},{path:"users",name:"AdminUsers",component:za}]},{path:"/:catchAll(.*)*  ",name:"404",component:()=>n.e(187).then(n.bind(n,2150))}],Ka=(0,a.p7)({history:(0,a.PO)("/"),routes:Ya});Ka.beforeEach(((e,t,n)=>{const a=localStorage.getItem("x_xsrf_token"),o=localStorage.getItem("ADMIN_x_xsrf_token");if(!a&&("post"===e.name||"all-blogs"===e.name))return n({name:"auth"});if(o){if("AdminLogin"===e.name&&o)return n({name:"AdminPanel"})}else if("AdminPanel"===e.name)return n({name:"AdminLogin"});n()}));var Xa=Ka},8042:function(e,t,n){var a=n(6265),o=n.n(a),r=n(1777);const s=o().create({baseURL:"http://example.localhost/",timeout:1e3,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"},withCredentials:!0});s.interceptors.request.use((function(e){const t=localStorage.getItem("adminToken"),n=localStorage.getItem("x_xsrf_token");return t&&(e.headers.Authorization=`Bearer ${t}`),n&&(e.headers.Authorization=`Bearer ${n}`),e})),s.interceptors.response.use({},(e=>{if(401===e.response.status||419===e.response.status){const e=localStorage.getItem("x_xsrf_token"),t=localStorage.getItem("ADMIN_x_xsrf_token");e?(localStorage.removeItem("x_xsrf_token"),r.Z.push({name:"auth"})):t&&(localStorage.removeItem("ADMIN_x_xsrf_token"),r.Z.push({name:"AdminLogin"}))}return{data:e.response.data,status:e.response.status}})),t["Z"]=s},377:function(e,t,n){n.d(t,{Z:function(){return m}});var a=n(3396);const o={class:"footer border-top bg-dark"},r=(0,a.uE)('<div class="container"><div class="d-flex flex-wrap justify-content-between align-items-center py-3 mt-4"><div class="footer__logo col-md-4 d-flex align-items-center"><a href="/" class="mb-3 me-2 mb-md-0 text-muted text-decoration-none lh-1"><svg class="bi" width="30" height="24"><use xlink:href="#bootstrap"></use></svg></a><span class="mb-3 mb-md-0 text-muted">© 2022 Maksim Barabanshikov Inc</span></div><ul class="footer__nav nav col-md-4 justify-content-end list-unstyled d-flex"><li class="ms-3"><a class="text-muted" href="#"><svg class="bi" width="24" height="24"><use xlink:href="#twitter"></use></svg></a></li><li class="ms-3"><a class="text-muted" href="#"><svg class="bi" width="24" height="24"><use xlink:href="#instagram"></use></svg></a></li><li class="ms-3"><a class="text-muted" href="#"><svg class="bi" width="24" height="24"><use xlink:href="#facebook"></use></svg></a></li></ul></div></div>',1),s=[r];function i(e,t,n,r,i,l){return(0,a.wg)(),(0,a.iD)("footer",o,s)}var l={name:"FooterComp"},d=n(89);const u=(0,d.Z)(l,[["render",i]]);var m=u}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={id:a,loaded:!1,exports:{}};return e[a](r,r.exports,n),r.loaded=!0,r.exports}n.m=e,function(){var e=[];n.O=function(t,a,o,r){if(!a){var s=1/0;for(u=0;u<e.length;u++){a=e[u][0],o=e[u][1],r=e[u][2];for(var i=!0,l=0;l<a.length;l++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](a[l])}))?a.splice(l--,1):(i=!1,r<s&&(s=r));if(i){e.splice(u--,1);var d=o();void 0!==d&&(t=d)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[a,o,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,a){return n.f[a](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+{179:"main",187:"NotFound",651:"AdminPanel",773:"welcome"}[e]+"."+{179:"f902cc0a",187:"1365680a",651:"a7287f2e",773:"0dacd84e"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+{187:"NotFound",651:"AdminPanel",773:"welcome"}[e]+"."+{187:"b13712ff",651:"e96779c9",773:"2a9b7e31"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="blog-vue-cli:";n.l=function(a,o,r,s){if(e[a])e[a].push(o);else{var i,l;if(void 0!==r)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var m=d[u];if(m.getAttribute("src")==a||m.getAttribute("data-webpack")==t+r){i=m;break}}i||(l=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",t+r),i.src=a),e[a]=[o];var c=function(t,n){i.onerror=i.onload=null,clearTimeout(p);var o=e[a];if(delete e[a],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(c.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=c.bind(null,i.onerror),i.onload=c.bind(null,i.onload),l&&document.head.appendChild(i)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p="/"}(),function(){var e=function(e,t,n,a){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var r=function(r){if(o.onerror=o.onload=null,"load"===r.type)n();else{var s=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=s,l.request=i,o.parentNode.removeChild(o),a(l)}};return o.onerror=o.onload=r,o.href=t,document.head.appendChild(o),o},t=function(e,t){for(var n=document.getElementsByTagName("link"),a=0;a<n.length;a++){var o=n[a],r=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(r===e||r===t))return o}var s=document.getElementsByTagName("style");for(a=0;a<s.length;a++){o=s[a],r=o.getAttribute("data-href");if(r===e||r===t)return o}},a=function(a){return new Promise((function(o,r){var s=n.miniCssF(a),i=n.p+s;if(t(s,i))return o();e(a,i,o,r)}))},o={143:0};n.f.miniCss=function(e,t){var n={187:1,651:1,773:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=a(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}(),function(){var e={143:0};n.f.j=function(t,a){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)a.push(o[2]);else{var r=new Promise((function(n,a){o=e[t]=[n,a]}));a.push(o[2]=r);var s=n.p+n.u(t),i=new Error,l=function(a){if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var r=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.src;i.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",i.name="ChunkLoadError",i.type=r,i.request=s,o[1](i)}};n.l(s,l,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,r,s=a[0],i=a[1],l=a[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(l)var u=l(n)}for(t&&t(a);d<s.length;d++)r=s[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},a=self["webpackChunkblog_vue_cli"]=self["webpackChunkblog_vue_cli"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(5130)}));a=n.O(a)})();
//# sourceMappingURL=app.dc2b5517.js.map